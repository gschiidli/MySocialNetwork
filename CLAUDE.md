# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

MySocialNetwork is an iOS application built with SwiftUI and managed using Tuist for project generation and build management.

## Build System: Tuist

This project uses Tuist for Xcode project generation and management. Tuist generates the Xcode workspace from declarative Swift manifests (Project.swift, Tuist.swift).

### Key Tuist Commands

- `tuist generate` - Generate the Xcode workspace from Project.swift manifest (required before opening in Xcode)
- `tuist build` - Build the project
- `tuist test` - Run unit tests
- `tuist run` - Build and run the app
- `tuist clean` - Clean build artifacts
- `tuist edit` - Generate a temporary project to edit Tuist manifests

**Important**: Always run `tuist generate` after modifying Project.swift or Tuist.swift to regenerate the Xcode project.

## Xcode Build MCP

This project has access to the Xcode Build MCP server, which provides tools for building, testing, and running iOS applications directly through Claude Code.

### Available MCP Tools

**Build & Run:**
- `mcp__XcodeBuildMCP__build_sim` - Build for iOS Simulator
- `mcp__XcodeBuildMCP__build_run_sim` - Build and run on iOS Simulator
- `mcp__XcodeBuildMCP__test_sim` - Run tests on iOS Simulator
- `mcp__XcodeBuildMCP__build_macos` - Build for macOS
- `mcp__XcodeBuildMCP__build_run_macos` - Build and run on macOS
- `mcp__XcodeBuildMCP__test_macos` - Run tests on macOS

**Simulator Management:**
- `mcp__XcodeBuildMCP__list_sims` - List available simulators
- `mcp__XcodeBuildMCP__boot_sim` - Boot a simulator
- `mcp__XcodeBuildMCP__open_sim` - Open Simulator.app
- `mcp__XcodeBuildMCP__screenshot` - Capture simulator screenshot
- `mcp__XcodeBuildMCP__describe_ui` - Get UI hierarchy with coordinates

**Project Discovery:**
- `mcp__XcodeBuildMCP__discover_projs` - Find Xcode projects/workspaces
- `mcp__XcodeBuildMCP__list_schemes` - List available schemes

### Typical Workflow

1. Use `discover_projs` to find the workspace
2. Use `list_schemes` to see available schemes
3. Use `list_sims` to find a suitable simulator
4. Use `build_run_sim` to build and run the app
5. Use `screenshot` or `describe_ui` to verify UI

**Note**: When building via MCP, ensure the workspace has been generated with `tuist generate` first.

## Project Structure

The project is defined in `Project.swift` with two main targets:

1. **MySocialNetwork** - The main iOS app target
   - Product: .app
   - Sources: `MySocialNetwork/Sources/`
   - Resources: `MySocialNetwork/Resources/`
   - Entry point: `MySocialNetworkApp.swift`

2. **MySocialNetworkTests** - Unit tests target
   - Product: .unitTests
   - Sources: `MySocialNetwork/Tests/`
   - Uses Swift Testing framework (not XCTest)
   - Dependencies: MySocialNetwork target

## Testing

The project uses Swift's native Testing framework (not XCTest). Tests are structured using:
- `@Test` attribute for test functions
- `#expect(...)` for assertions
- `@testable import MySocialNetwork` to access internal types

Run tests with: `tuist test`

## Architecture Notes

- SwiftUI-based UI architecture
- App entry point: `MySocialNetworkApp.swift` with `@main` attribute
- Main view: `ContentView.swift`
- Derived sources in `Derived/Sources/` are auto-generated by Tuist (do not edit manually)

## Development Workflow & Best Practices

### Always Verify Builds

**CRITICAL**: After making ANY code changes, you MUST verify that the project builds successfully. If the build fails, you MUST fix the issues before completing the task.

**Required workflow:**

1. Make code changes
2. Run `tuist generate` if you modified dependencies or project structure
3. Build the project using one of these methods:
   - `mcp__XcodeBuildMCP__build_sim` with a simulator
   - `mcp__XcodeBuildMCP__build_macos` for macOS targets
   - `tuist build` command
4. If the build fails:
   - Read the error messages carefully
   - Fix all compilation errors
   - Repeat step 3 until the build succeeds
5. Only mark the task as complete once the build is verified

**Common build verification scenarios:**
- Added new dependencies → Run `tuist generate` then build
- Modified Swift files → Build to verify syntax and type errors
- Changed project configuration → Run `tuist generate` then build
- Refactored code → Build and run tests to verify functionality

**Never assume code is correct without building.** Build errors caught early prevent integration issues and save time.
